#!/bin/sh

. /lib/apm821xx.sh

preinit_set_mac_address() {
	case $(apm821xx_board_name) in
		mr24)
			mac_lan=$(mtd_get_mac_binary_ubi board-config 102)
			[ -n "$mac_lan" ] && ifconfig eth0 hw ether "$mac_lan"
			;;

		mx60)
			mac_lan=$(mtd_get_mac_binary_ubi board-config 102)
			[ -n "$mac_lan" ] && ifconfig eth0 hw ether "$mac_lan"
			#mac_wan=$(macaddr_add $(mtd_get_mac_binary_ubi board-config 102) +1)
			#[ -n "$mac_wan" ] && ifconfig eth0.2 hw ether "$mac_wan"
			;;
	esac
}

boot_hook_add preinit_main preinit_set_mac_address
